# Code Beautifier Project Instructions for Copilot ðŸ¤–

This project, named **CodeGlow**, is a web tool built with **Next.js** for both the frontend and backend. Its core function is to receive source code (Python, Java, or JavaScript) and return a **Rich Text Format (RTF)** string that is color-coded and correctly indented for copying into word processors.

---

## Quick Reference

This document provides a comprehensive overview of the project guidelines. For detailed information on specific topics, refer to the modular instruction files in `.github/copilot-instructions/`:

- [Project Overview](./copilot-instructions/project-overview.md)
- [Technology Stack & Architecture](./copilot-instructions/technology-stack.md)
- [Backend Libraries](./copilot-instructions/backend-libraries.md)
- [Core Logic & Output Requirements](./copilot-instructions/core-logic.md)
- [Code Style & Maintainability](./copilot-instructions/code-style.md)
- [Next.js Best Practices](./copilot-instructions/next-js-best-practices.md)
- [Performance Guidelines](./copilot-instructions/performance.md)
- [Accessibility Guidelines](./copilot-instructions/accessibility.md)
- [Security Guidelines](./copilot-instructions/security.md)
- [Testing Requirements](./copilot-instructions/testing.md)

---

## 1. Technology Stack & Architecture

- **Framework:** Use **Next.js** with the **App Router** exclusively. Avoid legacy **Pages Router** syntax.
- **Language:** Use **TypeScript** for all files (`.ts`/`.tsx`). Type safety is mandatory.
- **Backend Logic:** Core formatting and RTF generation logic must reside in a **Next.js API route handler** (e.g., `app/api/format/route.ts`).
- **Styling:** Use **Tailwind CSS** for all component styling.

---

## 2. Backend Libraries (Next.js API Routes) ðŸ’¾

The API logic must adhere to the following library choices for the formatting pipeline. Do not suggest running external non-Node.js processes (like native Python/Java executables) unless absolutely necessary for the formatter/beautifier tool that lacks a native JS/TS binding.

- **Code Highlighting:** Use **`highlight.js`** for syntax highlighting. The output must be HTML with CSS classes applied.
- **JavaScript Formatting:** Use **`prettier`** for all JavaScript/TypeScript beautification and indentation.
- **RTF Conversion (Critical):** Use or prioritize libraries that can convert **HTML â†’ RTF** (e.g., look for `html-to-rtf` packages or suggest creating a custom utility wrapper around a reliable RTF standard library for Node.js). This step must preserve the colors/styles generated by `highlight.js`.

---

## 3. Core Logic & Output Requirements

- **Formatting Chain:** The backend task is a clear pipeline: **Raw Code â†’ Indented Code â†’ Highlighted HTML â†’ RTF String**. Copilot must adhere to this flow.
- **Multi-Language:** All formatting and highlighting functions must handle the distinct syntax of **Python**, **Java**, and **JavaScript** correctly.
- **Client Logic:** The frontend must use the native **Clipboard API** to copy the RTF string into the clipboard with proper MIME types (`text/rtf` and `text/plain` as fallback), not just plain text.
- **Clipboard Style Policy:** When code is copied to clipboard:
  - Background: White (`#FFFFFF`)
  - Font: Courier New, monospace, 10pt
  - Use high-contrast, vibrant syntax highlighting colors optimized for visibility in MS Word:
    - Keywords: Bright red (`#d73a49`) - for if, for, def, class, import, etc.
    - Strings: Dark blue (`#032f62`) - for string literals
    - Comments: Medium gray (`#6a737d`) - for code comments
    - Functions: Purple (`#6f42c1`) - for function names
    - Numbers: Bright blue (`#005cc5`) - for numeric literals
    - Operators: Bright red (`#d73a49`) - for +, -, *, =, etc.
    - Punctuation: Dark gray (`#24292e`) - for brackets, commas, etc.
    - Class names: Purple (`#6f42c1`) - for class definitions
    - Variables: Dark gray (`#24292e`) - for variable names
  - Colors must be visible in both MS Word Light mode and Dark mode (with white or dark page colors)
  - RTF format compatible with Microsoft Word, Google Docs, and other word processors

---

## 4. Code Style & Maintainability

- **Naming Conventions:** Use **PascalCase** for React Components and TypeScript Interfaces/Types. Use **camelCase** for variables and functions.
- **Indentation:** Use **2 spaces** for indentation across all languages (TS, Python, Java).
- **Testing:** Whenever possible for core utility functions (especially RTF conversion and language formatting), include a basic **unit test** file (e.g., using Jest) to cover the primary "happy path" case.

---

## Next.js Best Practices

- Use App Router conventions when creating new routes and pages
- Implement Server Components by default; use Client Components only when necessary (interactivity, hooks, browser APIs)
- Follow Next.js file and folder naming conventions (kebab-case for files)
- Use `next/image` for image optimization
- Use `next/link` for client-side navigation
- Leverage Next.js built-in optimizations (automatic code splitting, route prefetching)

## Performance

- Implement lazy loading for heavy components
- Optimize images and assets
- Monitor and optimize Core Web Vitals
- Consider streaming and suspense for better UX

## Accessibility

- Ensure all interactive elements are keyboard accessible
- Use semantic HTML elements
- Maintain good color contrast ratios

## Security

- Sanitize user inputs when processing code
- Avoid executing user-provided code
- Follow OWASP guidelines for web applications
- Keep dependencies updated
